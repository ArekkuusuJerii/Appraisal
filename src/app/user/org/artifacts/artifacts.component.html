<div class="ui-g">
  <div class="ui-g-12 ui-g-nopad">
    <p-table [columns]="cols" [value]="links" scrollHeight="100%" [scrollable]="true" [responsive]="true">
      <ng-template pTemplate="colgroup" let-columns>
        <colgroup>
          <col *ngFor="let col of columns" [style.width]="col.width">
        </colgroup>
      </ng-template>
      <ng-template pTemplate="header" let-columns>
        <tr>
          <th *ngFor="let col of columns" pResizableColumn>
            {{col.header}}
          </th>
          <th></th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-rowData let-columns="columns">
        <tr>
          <td *ngFor="let col of columns">
            <div *ngIf="col.field == 'date'; then date else name"></div>
            <ng-template #name>
              <span class="ui-column-title">{{col.header}}</span>
              <a target="_blank" href="{{rowData[col.field]}}">{{rowData[col.field]}}</a>
            </ng-template>
            <ng-template #date>
              <span class="ui-column-title">{{col.header}}</span>
              {{rowData[col.field] | date : "MMMM dd yyy, h:mm:ss a"}}
            </ng-template>
          </td>
          <td>
            <button pButton (click)="delete(rowData)" type="button" icon="fa fa-close" class="ui-button-danger"></button>
          </td>
        </tr>
      </ng-template>
      <ng-template pTemplate="summary">
        Existen {{links.length}} artefactos en esta evidencia
      </ng-template>
    </p-table>
  </div>
  <div class="ui-g-12 ui-g-nopad">
    <div *ngIf="!activeLink" [class]="!activeFile ? 'ui-g-6' : 'ui-g-12'">
      <p-inplace [active]="activeFile">
        <div pInplaceDisplay>
          <button pButton (click)="activeLink = false;activeFile = true;" type="button" icon="fa fa-external-link"
                  label="Introduce un archivo"></button>
        </div>
        <p-panel header="Archivo" class="ui-g"  pInplaceContent>
          <div class="ui-g-12 ui-md-10">
            <p-fileUpload #file [showUploadButton]="false" [showCancelButton]="false"
                          chooseLabel="Selecciona un archivo" [customUpload]="true"
                          (uploadHandler)="uploadFile($event)"
                          [maxFileSize]="1000000 * 10"></p-fileUpload>
          </div>
          <div class="ui-g-12 ui-md-2 ui-g-nopad">
            <div class="ui-g-6 ui-md-12">
              <button pButton (click)="file.upload();activeLink = false;activeFile = false;" type="button"
                      class="ui-button-success"
                      icon="fa fa-upload"></button>
            </div>
            <div class="ui-g-6 ui-md-12">
              <button pButton (click)="activeLink = false;activeFile = false;file.clear()" type="button"
                      class="ui-button-danger"
                      icon="fa fa-close"></button>
            </div>
          </div>
        </p-panel>
      </p-inplace>
    </div>
    <div *ngIf="!activeFile" [class]="!activeLink ? 'ui-g-6' : 'ui-g-12'">
      <p-inplace [active]="activeLink">
        <div pInplaceDisplay>
          <button pButton (click)="activeLink = true;activeFile = false;" type="button" icon="fa fa-external-link"
                  label="Introduce un hipervinculo"></button>
        </div>
        <p-panel header="Hipervinculo" class="ui-g" pInplaceContent>
          <div class="ui-g-12 ui-md-10">
            <form [formGroup]="formHiperlink" (ngSubmit)="uploadHiperlinK()">
              <input #link type="text" formControlName="hiperlink" placeholder="hipervinculo" pInputText>
            </form>
          </div>
          <div class="ui-g-12 ui-md-2 ui-g-nopad">
            <div class="ui-g-12 ui-md-6">
              <button pButton type="button" (click)="uploadHiperlinK()" icon="fa fa-upload"
                      class="ui-button-success"></button>
            </div>
            <div class="ui-g-12 ui-md-6">
              <button pButton (click)="activeLink = false;activeFile = false;" type="button" class="ui-button-danger"
                      icon="fa fa-close"></button>
            </div>
          </div>
        </p-panel>
      </p-inplace>
    </div>
  </div>
</div>
